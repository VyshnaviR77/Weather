<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
        integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- font -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
        integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .box {
            background-color: #bcd1e1;
            color: rgb(11, 7, 7);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            width: 200px;
            gap: 10;
            margin-left: 100px;
        }
    </style>
</head>

<body>

    <div style="min-height: 100vh; background-image:url('https://images.pexels.com/photos/314726/pexels-photo-314726.jpeg?cs=srgb&dl=pexels-pixabay-314726.jpg&fm=jpg')"
        ; class="  d-flex align-items-center flex-column">
        <h1 class="text-center m-5" style="color:rgb(21, 108, 112); width:600px; font-family: Special Elite; font-weight: 300px;">Weather Today</h1>
        <div class="d-flex">
            <input id="inputdata" type="text" class="form-control mt-4" placeholder="Enter State name">


            <button onclick="generate()" class="btn btn-outline-success mt-4  ms-2 "
                style="background-color: green; color: white;">Search </button>
        </div>

        <div id="display" class=" mt-5  ">


        </div>
    </div>



    </div>
</body>

<script>
    const generate = async () => {
        const Weather = document.getElementById('inputdata').value
        try {
            const result = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${Weather}&appid=5b4bee0ba241d092159faf007e166080`)
            console.log(result);

            const countryWeather = await result.json()
            console.log(countryWeather);



            //time
            const timestamp = countryWeather.dt + countryWeather.timezone; // UTC + timezone offset in seconds
            const localTime = new Date(timestamp * 1000); // convert to milliseconds

            // Get day, date, month, year
            const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

            const dayName = days[localTime.getUTCDay()];
            const date = localTime.getUTCDate();
            const monthName = months[localTime.getUTCMonth()];
            const year = localTime.getUTCFullYear();

            const fullDate = `${dayName}, ${date} ${monthName} ${year}`;
            console.log(fullDate);
            //time
            const hours = localTime.getUTCHours().toString().padStart(2, '0');
            const minutes = localTime.getUTCMinutes().toString().padStart(2, '0');
            const seconds = localTime.getUTCSeconds().toString().padStart(2, '0');

            const timeString = `${hours}:${minutes}:${seconds}`;



            display.innerHTML = `<div id="display" class="text-center  p-3 ">
               
               
           
                 <h2 class=" fw-bold" style="font-family: Story Script"; > ${countryWeather.name} <br>
                 <h4 class="mt-2"  style="font-family: Playfair Display;">${fullDate} <br> ${timeString}</h4>;
                 <img src="./images/cloudy.png" width="150px" alt="">
                <h2 class="p-2 fw-bold" style="font-family: Oleo Script";>${Object.values(countryWeather.clouds)}°C Cloudy</h2> 
              
             
            
            <div class="mt-5 d-flex gap-4">   
                <div class="box fw-bold">
                <img src="./images/hot.png" width="120px" alt="">
                Temperature: ${countryWeather.main.temp}°C
                </div>
                <div class="box fw-bold">
                <img src="./images/wind.png" width="120px" alt=""><br>
                Wind: ${countryWeather.wind.speed} m/s
                </div>
                <div class="box fw-bold">
                <img src="./images/cloud.png" width="120px" alt=""><br>
                Humanity: ${countryWeather.main.humidity} 
                </div>
          
            </div>

            </div>`



        }
        catch (err) {
            console.log(err);
            display.innerHTML += `<h1 style="font-family: Oleo Script"; > Country Not Found</h1>`

        }

    }
</script>

</html>